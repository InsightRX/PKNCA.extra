<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Run a non-compartmental analysis — run_nca • PKNCA.extra</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Run a non-compartmental analysis — run_nca"><meta name="description" content="This function runs an NCA on a pre-parsed dataset. The NCA will be performed
using the PKNCA package. The NCA output object will be saved to an
rds file if path is specified."><meta property="og:description" content="This function runs an NCA on a pre-parsed dataset. The NCA will be performed
using the PKNCA package. The NCA output object will be saved to an
rds file if path is specified."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">PKNCA.extra</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Run a non-compartmental analysis</h1>

      <div class="d-none name"><code>run_nca.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function runs an NCA on a pre-parsed dataset. The NCA will be performed
using the PKNCA package. The NCA output object will be saved to an
rds file if <code>path</code> is specified.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">run_nca</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  dose_data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  specification <span class="op">=</span> <span class="st">"default"</span>,</span>
<span>  dictionary <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  settings <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  blq <span class="op">=</span> <span class="st">"&lt;"</span>,</span>
<span>  groups <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  include_cols <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  intervals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>start <span class="op">=</span> <span class="fl">0</span>, end <span class="op">=</span> <span class="cn">Inf</span><span class="op">)</span>,</span>
<span>  partial_auc <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  exclude_points <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  exclude_subjects <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sequence_from <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  add_auctau <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  post <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>accumulation <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>parameters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"auctau"</span>, <span class="st">"cmax"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  no_dots <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  path <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>dataset in pre-parse format, preferrably created using
<code>create_nca_data()</code>. Can also be a NONMEM-style dataset with EVID=0|1 column
indicating PK an dosing data.</p></dd>


<dt id="arg-dose-data">dose_data<a class="anchor" aria-label="anchor" href="#arg-dose-data"></a></dt>
<dd><p>optional, a data.frame with all dosing info. Useful for
multi-dose NCAs. Alternative to specifying a NONMEM-style datasett to <code>data</code>.</p></dd>


<dt id="arg-specification">specification<a class="anchor" aria-label="anchor" href="#arg-specification"></a></dt>
<dd><p>use specific options for the NCA and for mapping of
input / output data.</p></dd>


<dt id="arg-dictionary">dictionary<a class="anchor" aria-label="anchor" href="#arg-dictionary"></a></dt>
<dd><p>abridged data dictionary for the input dataset, specified
as list object. Requires at least entries for <code>subject_id</code>, <code>time</code>, <code>conc</code>,
<code>dose</code>. Optional entries are: <code>visit</code>.
If required entries are specified only partially, then default values
(i.e. CDISC) nomenclature will be imputed for missing identifiers.</p></dd>


<dt id="arg-settings">settings<a class="anchor" aria-label="anchor" href="#arg-settings"></a></dt>
<dd><p>list of settings for NCA. Provided setting names can either
be settings recognized directly by <code>pknca</code>, or settings that are included in
the map provided by <code>nca_settings_map()</code> (which are then mapped to <code>pknca</code>
setting names).</p></dd>


<dt id="arg-blq">blq<a class="anchor" aria-label="anchor" href="#arg-blq"></a></dt>
<dd><p>optional, string to match in concentration data, e.g. "&lt;" or
"BLQ&gt;. If <code>conc</code> column in the data is <code>character</code> class, then if <code>blq</code> is
not NULL, it will detect any values that match this string and set those
values to zero. If NULL, or <code>conc</code> data is numeric, the data will be used
as-is.</p></dd>


<dt id="arg-groups">groups<a class="anchor" aria-label="anchor" href="#arg-groups"></a></dt>
<dd><p>optional grouping variable, e.g. <code>ACTARM</code>.</p></dd>


<dt id="arg-include-cols">include_cols<a class="anchor" aria-label="anchor" href="#arg-include-cols"></a></dt>
<dd><p>Optional. Character vector of column names in <code>data</code> that
should be merged in with NCA results (including only a single value for each
row). Merge will happen by subject ID, any supplied groupings, and
<code>nca_start</code> time.</p></dd>


<dt id="arg-intervals">intervals<a class="anchor" aria-label="anchor" href="#arg-intervals"></a></dt>
<dd><p>specify time intervals for NCA calculations. The passed argument
should be a data.frame, with at least the <code>start</code> and <code>end</code> time for each
row that specifies the interval. <code>Inf</code> is allowed to specify the end of the
interval. Example:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>intervals <span class="ot">=</span> <span class="fu">bind_rows</span>(</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>   <span class="fu">c</span>(<span class="at">start =</span> <span class="dv">0</span>, <span class="at">end =</span> <span class="dv">24</span>),</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>   <span class="fu">c</span>(<span class="at">start =</span> <span class="dv">120</span>, <span class="at">end =</span> <span class="cn">Inf</span>)</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>)</span></code></pre><p></p></div>
<p>The <code>run_nca()</code> function will compute all parameters that are specified in
<code>settings()</code> or in the default settings.</p></dd>


<dt id="arg-partial-auc">partial_auc<a class="anchor" aria-label="anchor" href="#arg-partial-auc"></a></dt>
<dd><p>a data.frame containing at least the <code>start</code> and <code>end</code>
time for each row that specifies the start- and endtime for the partial AUC
calculation. At least the AUC_0-t (<code>auclast</code>) will be calculated for each
row. Any other parameters specified in the data.frame as column will also be
calculated, e.g. <code>cmax=TRUE</code>. Currently, only a single row can be supplied
as argument.</p></dd>


<dt id="arg-exclude-points">exclude_points<a class="anchor" aria-label="anchor" href="#arg-exclude-points"></a></dt>
<dd><p>list of points to exclude, based on name(s) in the
list that should match column name in the input dataset.
E.g. <code>list("sample_id" = c("12345", "23456"))</code>. This could similarly be used
to exclude entire subjects, e.g. <code>list("subject_id = c("103, "105")</code></p></dd>


<dt id="arg-exclude-subjects">exclude_subjects<a class="anchor" aria-label="anchor" href="#arg-exclude-subjects"></a></dt>
<dd><p>description...</p></dd>


<dt id="arg-sequence-from">sequence_from<a class="anchor" aria-label="anchor" href="#arg-sequence-from"></a></dt>
<dd><p>optional. Argument should specify the column name
that indicates the treatment e.g. for food-effect cross-over trials. It
will then add sequence group and sequence description columns to the
output data.</p></dd>


<dt id="arg-add-auctau">add_auctau<a class="anchor" aria-label="anchor" href="#arg-add-auctau"></a></dt>
<dd><p>compute AUCtau whenever relevant? TRUE (default) / FALSE.
For multi-dose PK data, this will add the parameter <code>auc_tau</code> to the NCA
output data as the AUC for each interval. In essence, it will just make a
copy of the AUClast for the interval. See exact logic in function
help page.</p></dd>


<dt id="arg-post">post<a class="anchor" aria-label="anchor" href="#arg-post"></a></dt>
<dd><p>named list of lists, indicating which hard-coded
post-processing steps to include, and options for each step.
Possible post-processing steps include:</p><ul><li><p><code>accumulation</code>: if NCA calculated for multiple non-overlapping intervals,
will add accumulation ratios for the parameters listed in the <code>parameters</code>
argument to the NCA output table for each interval.</p></li>
</ul><p>Other options may be added in future. Default is:
<code>list("accumulation" = list("parameters" = c("auclast", "cmax")))</code>.</p></dd>


<dt id="arg-no-dots">no_dots<a class="anchor" aria-label="anchor" href="#arg-no-dots"></a></dt>
<dd><p>if <code>TRUE</code> (default) will replace any dots in parameter names
(e.g. <code>aucinf.obs</code>) with underscores (<code>aucinf_obs</code>).</p></dd>


<dt id="arg-path">path<a class="anchor" aria-label="anchor" href="#arg-path"></a></dt>
<dd><p>path to file to store output object from PKNCA as RDS (optional)</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>verbose output?</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>parameters passed to `PKNCA::pk.nca()“ function.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>There are four possible types of input datasets that can be used to run the
NCA:</p><ol><li><p>Using a separate data.frame for PK data (<code>data</code>) and dose data
(<code>dose_data</code>), with each PK or dosing event a row in the respective datasedt.
Can be used for both single and multi-dose data.</p></li>
<li><p>Using a single data.frame for PK and dose data (<code>data</code>), with event type
separated using an evid column (specified in <code>dictionary</code>). PK data rows
should be set to <code>evid=0</code>, and doses to <code>evid=1</code>. This is essentially a
NONMEM-style dataset. Rows with other <code>evid</code> values will be ignored.
Can be used for both single and multi-dose data, the dosing occasions will
be determined from the dosing events. If an <code>evid</code> column is present in
<code>data</code>, it will not attempt to use approach 3.</p></li>
<li><p>Using a single data.frame (<code>data</code>) with PK data as rows, and a column for
dose (with colum name specified in <code>dictionary</code>). A <code>dose_data</code> data.frame
will be constructed from the dose column. Can only be used for single-dose
data, unless <code>groups</code> are used to separate the dosing occasions.</p></li>
<li><p>Using a single data.frame (<code>data</code>) with PK data as rows, but no dosing
info in the data. NCA can still compute AUC and Cmax etc, but parameters that
require the dose such as CL, V, etc will be returned as NA. Can only be used
for single dose, unless <code>groups</code> are used to separate the dosing occasions.</p></li>
</ol></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu">run_nca</span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">data</span>,</span></span>
<span class="r-in"><span>  path <span class="op">=</span> <span class="st">"./outputs/nca.rds"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ron Keizer.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

